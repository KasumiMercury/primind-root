# =============================================================================
# GCP Project Configuration
# =============================================================================
project_id     = "your-project-id"
project_number = "123456789012"
region         = "asia-northeast2"

# =============================================================================
# Shared Infrastructure Configuration
# =============================================================================
database = {
  tier      = "db-f1-micro"
  disk_size = 10
  disk_type = "PD_HDD"
}

redis = {
  primary_region = "ap-northeast-1"
  tls            = true
  eviction       = true
}

# =============================================================================
# External URLs
# =============================================================================
web_app_url              = "https://primind.example.com"
oidc_google_redirect_uri = "https://api.primind.example.com/auth/callback"

# =============================================================================
# Per-Service Configuration
# Database passwords are auto-generated by Terraform
# =============================================================================
services = {
  central_backend = {
    image_tag     = "v0.1.0"
    min_instances = 0
    max_instances = 3
    cpu           = "1"
    memory        = "512Mi"
    # database name/user can be customized (optional):
    # database = {
    #   name = "primind_db"
    #   user = "primind_user"
    # }
  }
  time_mgmt = {
    image_tag     = "v0.1.0"
    min_instances = 0
    max_instances = 3
    cpu           = "1"
    memory        = "512Mi"
    # database name/user can be customized (optional):
    # database = {
    #   name = "timemgmt_db"
    #   user = "timemgmt_user"
    # }
  }
  throttling = {
    image_tag     = "v0.1.0"
    min_instances = 0
    max_instances = 3
    cpu           = "1"
    memory        = "512Mi"
  }
  notification_invoker = {
    image_tag     = "v0.1.0"
    min_instances = 0
    max_instances = 5
    cpu           = "1"
    memory        = "512Mi"
  }
}

# =============================================================================
# OIDC Credentials (from Google Cloud Console)
# Set via environment variables:
# =============================================================================
# export TF_VAR_oidc_google_client_id="your-google-client-id"
# export TF_VAR_oidc_google_client_secret="your-google-client-secret"

# =============================================================================
# Upstash Credentials (for Redis)
# Set via environment variables:
# =============================================================================
# export TF_VAR_upstash_email="your-upstash-email"
# export TF_VAR_upstash_api_key="your-upstash-api-key"

# =============================================================================
# Migration Configuration
# Bastion VM is managed via task commands (do not set here):
#   task gcp:bastion:up   - Deploy bastion VM
#   task gcp:bastion:down - Destroy bastion VM
# See: task gcp:migrate:help for full migration workflow
# =============================================================================
# enable_bastion = false  # Managed via task commands

# =============================================================================
# Cost Management
# Uncomment to reduce costs by stopping or deleting costly resources
# =============================================================================
# Stop Cloud SQL (data preserved, services won't work)
# stop_costly_resources = true

# Delete all costly resources (Cloud SQL, VPC Connector, Redis)
# WARNING: Data will be lost! Services will also be deleted.
# delete_costly_resources = true
